{"kind":"article","identifier":{"url":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/GtkBackend","interfaceLanguage":"swift"},"metadata":{"title":"GtkBackend","role":"article","modules":[{"name":"SwiftCrossUI"}],"roleHeading":"Article"},"sections":[],"primaryContentSections":[{"content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"inlineContent":[{"type":"text","text":"While Gtk isn’t the preferred UI framework on every Linux distro, it’s the closest thing SwiftCrossUI has to a native Linux backend for now. The Qt backend may be brought back to life at some point to cover the rest of Linux distros."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"For targetting older pre Gtk 4 Linux distros, see the secondary "},{"identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/Gtk3Backend","type":"reference","isActive":true}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"This backend supports Linux, macOS, and Windows, but its support for macOS has a few known issues worse due to underlying Gtk issues (and its support for Windows isn’t well tested)."}],"type":"paragraph"},{"anchor":"System-dependencies","level":2,"type":"heading","text":"System dependencies"},{"inlineContent":[{"type":"text","text":"Before you can use "},{"code":"GtkBackend","type":"codeVoice"},{"type":"text","text":" you must install the required system dependencies for your platform. Here are installation instructions tailored to each supported platform;"}],"type":"paragraph"},{"anchor":"Linux","level":3,"type":"heading","text":"Linux"},{"syntax":"sh","code":["# Debian-based distros","sudo apt install libgtk-4-dev clang","","# Fedora-based distros","sudo dnf install gtk4-devel clang"],"type":"codeListing"},{"inlineContent":[{"text":"Figure 1: ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"installing the required dependencies on Debian-based and Fedora-based Linux distros","type":"text"}]}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"If you run into errors related to not finding "},{"code":"gtk\/gtk.h","type":"codeVoice"},{"type":"text","text":" when trying to build a swift-cross-ui project, try restarting your computer. This has worked in some cases (although there may be a more elegant solution)."}],"type":"paragraph"},{"inlineContent":[{"text":"If you are on a non-Debian non-Fedora distro and the ","type":"text"},{"code":"GtkBackend","type":"codeVoice"},{"text":" requirements end up differing significantly from the requirements stated above, please open a GitHub issue or PR so that we can improve the documentation.","type":"text"}],"type":"paragraph"},{"type":"heading","anchor":"macOS","text":"macOS","level":3},{"syntax":"sh","type":"codeListing","code":["brew install pkg-config gtk4"]},{"type":"paragraph","inlineContent":[{"text":"Figure 2: ","type":"text"},{"inlineContent":[{"type":"text","text":"installing the required dependencies using Homebrew"}],"type":"emphasis"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you don’t have Homebrew, installation instructions can be found at "},{"type":"reference","isActive":true,"identifier":"https:\/\/brew.sh"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"It should also be possible to use "},{"code":"gtk4","type":"codeVoice"},{"type":"text","text":" installed via MacPorts, but I have not tested that."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you run into errors related to "},{"type":"codeVoice","code":"libffi"},{"type":"text","text":" or "},{"type":"codeVoice","code":"FFI"},{"type":"text","text":" when trying to build a swift-cross-ui project with "},{"type":"codeVoice","code":"GtkBackend"},{"type":"text","text":", which can occur when certain older versions of the Xcode Command Line Tools are installed, try running the following command to patch libffi:"}]},{"syntax":"sh","type":"codeListing","code":["sed -i '' 's\/-I..includedir.\/\/g' $(brew --prefix)\/Library\/Homebrew\/os\/mac\/pkgconfig\/*\/libffi.pc"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Figure 3: "},{"inlineContent":[{"type":"text","text":"fixing the "},{"type":"codeVoice","code":"libffi"},{"type":"text","text":" issue that some people face"}],"type":"emphasis"}]},{"type":"heading","anchor":"Windows","text":"Windows","level":3},{"type":"paragraph","inlineContent":[{"text":"On Windows things are a bit complicated (as usual), so we only support installation via ","type":"text"},{"isActive":true,"identifier":"https:\/\/github.com\/microsoft\/vcpkg","type":"reference"},{"text":". First, install vcpkg;","type":"text"}]},{"type":"codeListing","syntax":"sh","code":["git clone https:\/\/github.com\/microsoft\/vcpkg C:\\vcpkg","C:\\vcpkg\\bootstrap-vcpkg.bat"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Figure 4: "},{"inlineContent":[{"type":"text","text":"install vcpkg (requires git cli)"}],"type":"emphasis"}]},{"type":"aside","name":"Warning","content":[{"type":"paragraph","inlineContent":[{"text":"It’s important to install vcpkg at the root of a drive due to limitations of the Gtk build system.","type":"text"}]}],"style":"warning"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"After installation, make the following changes to your environment variables:","type":"text"}]}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Set the "},{"code":"PKG_CONFIG_PATH","type":"codeVoice"},{"type":"text","text":" environment variable to "},{"code":"C:\\vcpkg\\installed\\x64-windows\\lib\\pkgconfig","type":"codeVoice"},{"type":"text","text":". This is only required for building."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add ","type":"text"},{"code":"C:\\vcpkg\\installed\\x64-windows\\bin","type":"codeVoice"},{"text":" to your ","type":"text"},{"code":"Path","type":"codeVoice"},{"text":" environment variable. This is only required for running.","type":"text"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"With vcpkg installed, you have two options for Gtk installation; global installation, and project-local installation"}]},{"type":"heading","anchor":"Global-Gtk-4-installation-recommended","level":4,"text":"Global Gtk 4 installation (recommended)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that the command depends on your machine’s architecture; choose between Figure 5 and Figure 6 accordingly."}]},{"inlineContent":[{"type":"text","text":"Installation can take 45+ minutes depending on your machine."}],"type":"paragraph"},{"code":["C:\\vcpkg\\vcpkg.exe install gtk --triplet x64-windows"],"type":"codeListing","syntax":"sh"},{"inlineContent":[{"text":"Figure 5: ","type":"text"},{"inlineContent":[{"type":"text","text":"install Gtk 4 globally on x64 Windows"}],"type":"emphasis"}],"type":"paragraph"},{"code":["C:\\vcpkg\\vcpkg.exe install gtk --triplet arm64-windows"],"type":"codeListing","syntax":"sh"},{"inlineContent":[{"type":"text","text":"Figure 6: "},{"inlineContent":[{"type":"text","text":"install Gtk 4 globally on arm64 Windows"}],"type":"emphasis"}],"type":"paragraph"},{"name":"Warning","type":"aside","style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Run the chosen command at the root of your drive to ensure that vcpkg doesn’t run in manifest mode."}]}]},{"level":4,"anchor":"Project-local-Gtk-4-installation-more-unreliable","type":"heading","text":"Project-local Gtk 4 installation (more unreliable)"},{"name":"Note","type":"aside","style":"note","content":[{"inlineContent":[{"text":"If the absolute path to your project contains spaces, it is possible that vcpkg will break, and installing globally will be a more reliable strategy.","type":"text"}],"type":"paragraph"}]},{"inlineContent":[{"type":"text","text":"To install Gtk 4 in a project-local dependency store you must setup a "},{"type":"codeVoice","code":"vcpkg.json"},{"type":"text","text":" manifest file and then run vcpkg, as detailed below;"}],"type":"paragraph"},{"inlineContent":[{"text":"First ","type":"text"},{"type":"codeVoice","code":"vcpkg.json"},{"text":" at the root of your project and make sure that it includes the ","type":"text"},{"type":"codeVoice","code":"gtk"},{"text":" dependency as demonstrated in Figure 7.","type":"text"}],"type":"paragraph"},{"code":["{","    \"name\": \"project-name\",","    \"version-string\": \"main\",","    \"dependencies\": [\"gtk\"]","}"],"type":"codeListing","syntax":"json"},{"inlineContent":[{"text":"Figure 7: ","type":"text"},{"inlineContent":[{"type":"text","text":"an example "},{"type":"codeVoice","code":"vcpkg.json"},{"type":"text","text":" package manifest"}],"type":"emphasis"}],"type":"paragraph"},{"code":["C:\\vcpkg\\vcpkg.exe install --triplet x64-windows"],"type":"codeListing","syntax":"sh"},{"inlineContent":[{"type":"text","text":"Figure 8: "},{"type":"emphasis","inlineContent":[{"type":"text","text":"install the dependencies listed in your package manifest"}]}],"type":"paragraph"},{"name":"Warning","type":"aside","style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Replace the triplet with "},{"type":"codeVoice","code":"arm64-windows"},{"type":"text","text":" if you’re on ARM64"}]}]},{"level":4,"anchor":"Troubleshooting-vcpkg","type":"heading","text":"Troubleshooting vcpkg"},{"inlineContent":[{"type":"text","text":"If vcpkg fails to build a package with an error along the lines of "},{"code":"ninja: error: manifest 'build.ninja' still dirty after 100 tries","type":"codeVoice"},{"type":"text","text":", then some of your vcpkg installation may have been installed in the future according to Windows due to your VM’s timezone being set incorrectly. This can be resolved by running the following commands in Git Bash;"}],"type":"paragraph"},{"code":["cd C:\\vcpkg","find . -type f -exec touch {} +"],"type":"codeListing","syntax":null},{"inlineContent":[{"text":"Figure 9: ","type":"text"},{"inlineContent":[{"type":"text","text":"fix vcpkg file modified times"}],"type":"emphasis"}],"type":"paragraph"},{"inlineContent":[{"text":"If you have a fix that doesn’t require Git Bash, feel free to ","type":"text"},{"identifier":"https:\/\/github.com\/stackotter\/swift-cross-ui\/issues\/new\/choose","type":"reference","isActive":true},{"text":" or pull request with your fix.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"If you face a different issue, please open an issue or pull request to update this troubleshooting section."}],"type":"paragraph"},{"level":2,"anchor":"Usage","type":"heading","text":"Usage"},{"code":["...","","let package = Package(","  ...","  targets: [","    ...","    .executableTarget(","      name: \"YourApp\",","      dependencies: [","        .product(name: \"SwiftCrossUI\", package: \"swift-cross-ui\"),","        .product(name: \"GtkBackend\", package: \"swift-cross-ui\"),","      ]","    )","    ...","  ]","  ...",")"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"Figure 10: ","type":"text"},{"inlineContent":[{"type":"text","text":"adding "},{"type":"codeVoice","code":"GtkBackend"},{"type":"text","text":" to an executable target"}],"type":"emphasis"}],"type":"paragraph"},{"code":["import SwiftCrossUI","import GtkBackend","","@main","struct YourApp: App {","  \/\/ You can explicitly initialize your app's chosen backend if you desire.","  \/\/ This happens automatically when you import any of the built-in backends.","  \/\/","  \/\/ var backend = GtkBackend()","  \/\/","  \/\/ If you aren't using Swift Bundler, you may have to explicitly provide","  \/\/ your app's identifier for some GtkBackend features to work correctly","  \/\/ (such as handling custom URL schemes).","  \/\/","  \/\/ var backend = GtkBackend(appIdentifier: \"com.example.YourApp\")","","  var body: some Scene {","    WindowGroup {","      Text(\"Hello, World!\")","        .padding()","    }","  }","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"text":"Figure 11: ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"using "},{"type":"codeVoice","code":"GtkBackend"}]}],"type":"paragraph"}],"kind":"content"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"paths":["\/documentation\/swiftcrossui\/gtkbackend"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI","doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/Built-in-backends"]]},"seeAlsoSections":[{"identifiers":["doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/DefaultBackend","doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/AppKitBackend","doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/UIKitBackend","doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/WinUIBackend","doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/Gtk3Backend"],"generated":true}],"abstract":[{"text":"SwiftCrossUI’s native Linux backend built on top of Gtk 4.","type":"text"}],"references":{"doc://SwiftCrossUI/documentation/SwiftCrossUI/WinUIBackend":{"title":"WinUIBackend","abstract":[{"text":"SwiftCrossUI’s native Windows backend built on top of WinUI 3.","type":"text"}],"url":"\/documentation\/swiftcrossui\/winuibackend","type":"topic","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/WinUIBackend","kind":"article","role":"article"},"https://github.com/microsoft/vcpkg":{"title":"vcpkg","identifier":"https:\/\/github.com\/microsoft\/vcpkg","type":"link","url":"https:\/\/github.com\/microsoft\/vcpkg","titleInlineContent":[{"text":"vcpkg","type":"text"}]},"https://github.com/stackotter/swift-cross-ui/issues/new/choose":{"title":"open an issue","identifier":"https:\/\/github.com\/stackotter\/swift-cross-ui\/issues\/new\/choose","type":"link","url":"https:\/\/github.com\/stackotter\/swift-cross-ui\/issues\/new\/choose","titleInlineContent":[{"type":"text","text":"open an issue"}]},"https://brew.sh":{"title":"brew.sh","identifier":"https:\/\/brew.sh","type":"link","url":"https:\/\/brew.sh","titleInlineContent":[{"text":"brew.sh","type":"text"}]},"doc://SwiftCrossUI/documentation/SwiftCrossUI":{"role":"collection","abstract":[{"type":"text","text":"Create cross-platform desktop apps for macOS, Linux, Windows, iOS and tvOS."}],"kind":"symbol","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI","type":"topic","title":"SwiftCrossUI","url":"\/documentation\/swiftcrossui"},"doc://SwiftCrossUI/documentation/SwiftCrossUI/Gtk3Backend":{"url":"\/documentation\/swiftcrossui\/gtk3backend","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/Gtk3Backend","role":"article","title":"Gtk3Backend","abstract":[{"type":"text","text":"A secondary Linux backend built on top of Gtk 3 (for older distros without Gtk 4)."}],"kind":"article","type":"topic"},"doc://SwiftCrossUI/documentation/SwiftCrossUI/UIKitBackend":{"title":"UIKitBackend","abstract":[{"type":"text","text":"SwiftCrossUI’s native iOS and tvOS backend built on top of UIKit."}],"url":"\/documentation\/swiftcrossui\/uikitbackend","type":"topic","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/UIKitBackend","kind":"article","role":"article"},"doc://SwiftCrossUI/documentation/SwiftCrossUI/DefaultBackend":{"title":"DefaultBackend","abstract":[{"type":"text","text":"An adaptive backend which uses different backends under the hood depending on the target operating system."}],"url":"\/documentation\/swiftcrossui\/defaultbackend","type":"topic","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/DefaultBackend","kind":"article","role":"article"},"doc://SwiftCrossUI/documentation/SwiftCrossUI/AppKitBackend":{"title":"AppKitBackend","abstract":[{"type":"text","text":"SwiftCrossUI’s native macOS backend built on top of AppKit."}],"url":"\/documentation\/swiftcrossui\/appkitbackend","type":"topic","identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/AppKitBackend","kind":"article","role":"article"},"doc://SwiftCrossUI/documentation/SwiftCrossUI/Built-in-backends":{"identifier":"doc:\/\/SwiftCrossUI\/documentation\/SwiftCrossUI\/Built-in-backends","kind":"article","type":"topic","role":"collectionGroup","title":"Built-in backends","url":"\/documentation\/swiftcrossui\/built-in-backends","abstract":[]}}}